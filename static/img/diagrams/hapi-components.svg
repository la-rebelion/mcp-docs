<svg viewBox="0 0 1000 700" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <!-- Gradients -->
    <linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1193b0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0a7a94;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="orangeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#da7756;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#b85d42;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="darkGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2a2a2a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1a1a1a;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="lightBlueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1193b0;stop-opacity:0.3" />
      <stop offset="100%" style="stop-color:#1193b0;stop-opacity:0.1" />
    </linearGradient>
    
    <linearGradient id="lightOrangeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#da7756;stop-opacity:0.3" />
      <stop offset="100%" style="stop-color:#da7756;stop-opacity:0.1" />
    </linearGradient>
    
    <linearGradient id="purpleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#c084fc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#a855f7;stop-opacity:1" />
    </linearGradient>
    
    <!-- Glow effects -->
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge> 
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Grid pattern -->
    <pattern id="grid" width="30" height="30" patternUnits="userSpaceOnUse">
      <path d="M 30 0 L 0 0 0 30" fill="none" stroke="#1193b0" stroke-width="0.5" opacity="0.05"/>
    </pattern>
    
    <!-- Arrow markers -->
    <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#1193b0"/>
    </marker>
    <marker id="arrowheadOrange" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#da7756"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1000" height="700" fill="#0f0f0f"/>
  <rect width="1000" height="700" fill="url(#grid)"/>
  
  <!-- Title -->
  <g id="title" transform="translate(360, 40)">
    <text x="0" y="0" fill="#1193b0" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle">HAPI</text>
    <text x="65" y="0" fill="#da7756" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle">MCP</text>
    <text x="210" y="0" fill="white" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle">Stack Components</text>
    <text x="140" y="20" fill="#da7756" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">The Happiness Stack Architecture</text>
  </g>
  
  <!-- User Interface Layer -->
  <g id="ui-layer">
    <rect x="50" y="100" width="900" height="80" rx="15" fill="url(#lightBlueGradient)" stroke="#1193b0" stroke-width="1"/>
    <text x="100" y="125" fill="#1193b0" font-family="Arial, sans-serif" font-size="16" font-weight="bold">User Interface</text>
    
    <rect x="80" y="140" width="80" height="30" rx="8" fill="url(#blueGradient)"/>
    <text x="120" y="160" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ğŸ’¬ Chat</text>
    
    <rect x="180" y="140" width="80" height="30" rx="8" fill="url(#blueGradient)"/>
    <text x="220" y="160" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ğŸ–¥ï¸ Web</text>
    
    <rect x="280" y="140" width="80" height="30" rx="8" fill="url(#blueGradient)"/>
    <text x="320" y="160" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ğŸ“± Mobile</text>
    
    <rect x="380" y="140" width="80" height="30" rx="8" fill="url(#blueGradient)"/>
    <text x="420" y="160" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ğŸ”Œ API</text>
  </g>
  
  <!-- Core Components Layer -->
  <g id="core-layer">
    <rect x="50" y="220" width="900" height="160" rx="15" fill="url(#lightOrangeGradient)" stroke="#da7756" stroke-width="2"/>
    <text x="100" y="245" fill="#da7756" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Core Components</text>
    
    <!-- ChatMCP -->
    <a href="/components/chatmcp">
      <g transform="translate(80, 260)">
        <rect width="140" height="100" rx="12" fill="url(#darkGradient)" stroke="#1193b0" stroke-width="2" filter="url(#glow)"/>
        <image x="20" y="15" href="/img/chatmcp/chatmcp.svg" width="50" height="50"/>
        <rect x="80" y="20" width="40" height="30" rx="8" fill="url(#blueGradient)" opacity="0.6"/>
        <text x="100" y="40" fill="white" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">ğŸ’¬ UI</text>
        <text x="55" y="80" fill="#1193b0" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">chat</text>
        <text x="85" y="80" fill="#da7756" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">MCP</text>
        <text x="70" y="95" fill="#1193b0" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Conversational AI</text>
      </g>
    </a>
    
    <!-- HAPI Server -->
    <a href="https://docs.mcp.com.ai/components/hapi-server">
      <g transform="translate(250, 260)">
        <rect width="140" height="100" rx="12" fill="url(#darkGradient)" stroke="#1193b0" stroke-width="2"  filter="url(#glow)"/>
        <image x="40" y="5" href="/img/diagrams/mcp-hapi-server-face.svg" width="60" height="60"/>
        <text x="70" y="95" fill="#1193b0" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">API &amp; MCP Gateway</text>
        <text x="50" y="80" fill="#1193b0" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">HAPI</text>
        <text x="90" y="80" fill="#da7756" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Server</text>
      </g>
    </a>

    <!-- runMCP -->
    <a href="/components/runmcp">
      <g transform="translate(420, 260)">
          <rect width="140" height="100" rx="12" fill="url(#darkGradient)" stroke="#1193b0" stroke-width="2" filter="url(#glow)"/>
          <image x="20" y="15" href="/img/runmcp/runMCP-logo.png" width="40" height="40"/>
          <text x="90" y="45" fill="#1193b0" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">run</text>
          <text x="115" y="45" fill="#da7756" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">MCP</text>
          <text x="70" y="65" fill="#1193b0" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Runtime &amp; Orchestration</text>
          <text x="70" y="80" fill="#1193b0" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Server Management</text>
          <text x="70" y="95" fill="#1193b0" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Service Discovery</text>
        </g>
      </a>
    
    <!-- Agents -->
    <a href="/components/agents">
      <rect x="590" y="260" width="140" height="100" rx="12" fill="url(#purpleGradient)" filter="url(#glow)"/>
      <text x="660" y="300" fill="white" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">ğŸ¤– Agents</text>
      <text x="660" y="325" fill="white" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Context Engineering</text>
      <text x="660" y="340" fill="white" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Reasoning Engine</text>
      <text x="660" y="355" fill="white" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Memory &amp; Tools</text>
    </a>
    
    <!-- MCP Servers -->
    <a href="https://mcp.com.ai">
      <rect x="760" y="260" width="140" height="100" rx="12" fill="url(#darkGradient)" stroke="#da7756" stroke-width="2" filter="url(#glow)"/>
      <text x="870" y="278" fill="white" filter="url(#glow)" font-family="Arial, sans-serif" font-size="9" text-anchor="middle">
        <animate attributeName="opacity" values="0.3;0.9;0.6;0.3" dur="5s" repeatCount="indefinite"/>
        Runtime
      </text>
      <text x="800" y="300" fill="#da7756" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">
        <animate attributeName="opacity" values="0.5;0.8;1;0.7;0.5" dur="5s" repeatCount="indefinite"/>
        ğŸ’“
      </text>
      <text x="830" y="300" fill="#1193b0" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">MCP</text>
      <text x="830" y="320" fill="#da7756" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Servers</text>
      <text x="830" y="340" fill="#da7756" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Tool Providers</text>
      <text x="830" y="355" fill="#da7756" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">API Integrations</text>
    </a>
  </g>
  
  <!-- Protocol Layer -->
  <g id="protocol-layer">
    <rect x="50" y="420" width="440" height="80" rx="15" fill="url(#lightBlueGradient)" stroke="#1193b0" stroke-width="1"/>
    <text x="100" y="445" fill="#1193b0" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Contracts Layer</text>
    
    <rect x="80" y="460" width="120" height="30" rx="8" fill="url(#blueGradient)"/>
    <text x="140" y="480" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ğŸ”— MCP </text>
    
    <rect x="220" y="460" width="120" height="30" rx="8" fill="url(#blueGradient)"/>
    <text x="280" y="480" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ğŸ“‹ OpenAPI/REST</text>
    
    <rect x="360" y="460" width="120" height="30" rx="8" fill="url(#blueGradient)"/>
    <text x="420" y="480" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ğŸŒ gRPC/IDL</text>
  </g>
  
  <!-- External Systems -->
  <g id="external-layer">
    <rect x="510" y="420" width="440" height="80" rx="15" fill="url(#lightOrangeGradient)" stroke="#da7756" stroke-width="1"/>
    <text x="560" y="445" fill="#da7756" font-family="Arial, sans-serif" font-size="16" font-weight="bold">External Systems</text>
    
    <rect x="540" y="460" width="80" height="30" rx="8" fill="url(#orangeGradient)"/>
    <text x="580" y="480" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ğŸ§  LLMs</text>
    
    <rect x="640" y="460" width="80" height="30" rx="8" fill="url(#orangeGradient)"/>
    <text x="680" y="480" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ğŸŒ APIs</text>
    
    <rect x="740" y="460" width="80" height="30" rx="8" fill="url(#orangeGradient)"/>
    <text x="780" y="480" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ğŸ—„ï¸ DBs</text>
    
    <rect x="840" y="460" width="80" height="30" rx="8" fill="url(#orangeGradient)"/>
    <text x="880" y="480" fill="white" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">â˜ï¸ Cloud</text>
  </g>
  
  <!-- Data Flow -->
  <g id="data-flow">
    <text x="100" y="540" fill="#1193b0" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Data Flow</text>
    
    <!-- User to Core -->
    <path d="M 270 180 L 270 220" stroke="#1193b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)" opacity="0.8">
      <animate attributeName="stroke-dasharray" values="0,10;10,0;0,10" dur="2s" repeatCount="indefinite"/>
    </path>
    
    <!-- Core component connections -->
    <path d="M 220 310 L 250 310" stroke="#1193b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)" opacity="0.8">
      <animate attributeName="stroke-dasharray" values="0,5;5,0;0,5" dur="1.5s" repeatCount="indefinite"/>
    </path>
    
    <path d="M 390 310 L 420 310" stroke="#1193b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)" opacity="0.8">
      <animate attributeName="stroke-dasharray" values="0,5;5,0;0,5" dur="1.8s" repeatCount="indefinite"/>
    </path>
    
    <path d="M 560 310 L 590 310" stroke="#1193b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)" opacity="0.8">
      <animate attributeName="stroke-dasharray" values="0,5;5,0;0,5" dur="2.2s" repeatCount="indefinite"/>
    </path>
    
    <path d="M 730 310 L 760 310" stroke="#da7756" stroke-width="2" fill="none" marker-end="url(#arrowheadOrange)" opacity="0.8">
      <animate attributeName="stroke-dasharray" values="0,5;5,0;0,5" dur="2.5s" repeatCount="indefinite"/>
    </path>
    
    <!-- Contract to External -->
    <path d="M 270 420 L 270 380" stroke="#1193b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)" opacity="0.8">
      <animate attributeName="stroke-dasharray" values="0,8;8,0;0,8" dur="3s" repeatCount="indefinite"/>
    </path>
    
    <path d="M 730 380 L 730 420" stroke="#da7756" stroke-width="2" fill="none" marker-end="url(#arrowheadOrange)" opacity="0.8">
      <animate attributeName="stroke-dasharray" values="0,8;8,0;0,8" dur="2.8s" repeatCount="indefinite"/>
    </path>
  </g>
  
  <!-- Key Features -->
  <g id="features">
    <text x="100" y="580" fill="#1193b0" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Key Features</text>
    
    <circle cx="120" cy="610" r="8" fill="#1193b0"/>
    <text x="140" y="615" fill="white" font-family="Arial, sans-serif" font-size="12">API-First Architecture</text>
    
    <circle cx="120" cy="635" r="8" fill="#da7756"/>
    <text x="140" y="640" fill="white" font-family="Arial, sans-serif" font-size="12">Context-Driven Conversations</text>
    
    <circle cx="350" cy="610" r="8" fill="#c084fc"/>
    <text x="370" y="615" fill="white" font-family="Arial, sans-serif" font-size="12">Memory &amp; Persistence</text>
    
    <circle cx="350" cy="635" r="8" fill="#1193b0"/>
    <text x="370" y="640" fill="white" font-family="Arial, sans-serif" font-size="12">OpenAPI Compliant</text>
    
    <circle cx="550" cy="610" r="8" fill="#da7756"/>
    <text x="570" y="615" fill="white" font-family="Arial, sans-serif" font-size="12">Agents Orchestration</text>
    
    <circle cx="550" cy="635" r="8" fill="#c084fc"/>
    <text x="570" y="640" fill="white" font-family="Arial, sans-serif" font-size="12">Agent-Based Reasoning</text>
  </g>
  
  <!-- Floating particles animation -->
  <g id="particles">
    <circle r="2" fill="#1193b0" opacity="0.6">
      <animate attributeName="cx" values="100;900;100" dur="15s" repeatCount="indefinite"/>
      <animate attributeName="cy" values="300;200;300" dur="10s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0;0.6;0" dur="5s" repeatCount="indefinite"/>
    </circle>
    <circle r="1.5" fill="#da7756" opacity="0.4">
      <animate attributeName="cx" values="200;800;200" dur="18s" repeatCount="indefinite"/>
      <animate attributeName="cy" values="400;500;400" dur="12s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0;0.4;0" dur="6s" repeatCount="indefinite"/>
    </circle>
  </g>
  
  <!-- HAPI Ecosystem branding -->
  <g transform="translate(760, 580)">
    <text x="0" y="0" fill="#1193b0" font-family="Arial, sans-serif" font-size="14" font-weight="bold">HAPI</text>
    <text x="35" y="0" fill="#da7756" font-family="Arial, sans-serif" font-size="14" font-weight="bold">MCP</text>
    <text x="75" y="0" fill="white" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Ecosystem</text>
    <text x="60" y="15" fill="white" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">The Happiness Stack</text>
  </g>
</svg>
