"use strict";(self.webpackChunkmcp_docs=self.webpackChunkmcp_docs||[]).push([[4720],{954:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"integrations/auth/workos","title":"Integrate WorkOS Authentication with MCP Servers","description":"Step-by-step instructions to add WorkOS authentication to MCP servers using an API-first approach.","source":"@site/docs/10-integrations/auth/workos.mdx","sourceDirName":"10-integrations/auth","slug":"/integrations/auth/workos","permalink":"/integrations/auth/workos","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"integrations","permalink":"/tags/integrations"},{"inline":true,"label":"authentication","permalink":"/tags/authentication"},{"inline":true,"label":"hapi","permalink":"/tags/hapi"},{"inline":true,"label":"demo","permalink":"/tags/demo"}],"version":"current","frontMatter":{"title":"Integrate WorkOS Authentication with MCP Servers","sidebar_label":"WorkOS","description":"Step-by-step instructions to add WorkOS authentication to MCP servers using an API-first approach.","tags":["integrations","authentication","hapi","demo"],"keywords":["WorkOS","MCP servers","authentication","API-first","OpenAPI","Swagger","HAPI server"],"author":"La Rebelion"},"sidebar":"tutorialSidebar","previous":{"title":"authentik","permalink":"/integrations/auth/authentik"},"next":{"title":"flowise","permalink":"/integrations/orchestrators/flowise"}}');var r=n(4848),a=n(8453),o=n(9487);const s={title:"Integrate WorkOS Authentication with MCP Servers",sidebar_label:"WorkOS",description:"Step-by-step instructions to add WorkOS authentication to MCP servers using an API-first approach.",tags:["integrations","authentication","hapi","demo"],keywords:["WorkOS","MCP servers","authentication","API-first","OpenAPI","Swagger","HAPI server"],author:"La Rebelion"},l="Integrate WorkOS with MCP Servers",c={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configure WorkOS",id:"configure-workos",level:2},{value:"Define API Security in OpenAPI Specification",id:"define-api-security-in-openapi-specification",level:2},{value:"Start the MCP Server",id:"start-the-mcp-server",level:2},{value:"Connect MCP Server to WorkOS",id:"connect-mcp-server-to-workos",level:2},{value:"Authenticate with Client ID",id:"authenticate-with-client-id",level:3},{value:"Authenticate with Dynamic Registration",id:"authenticate-with-dynamic-registration",level:3},{value:"Review Authentication in WorkOS",id:"review-authentication-in-workos",level:2},{value:"Demo Authentication with WorkOS",id:"demo-authentication-with-workos",level:2},{value:"Wrapping Up",id:"wrapping-up",level:2}];function d(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"integrate-workos-with-mcp-servers",children:"Integrate WorkOS with MCP Servers"})}),"\n",(0,r.jsx)(t.p,{children:"This guide explains how to add WorkOS authentication to MCP servers using an API-first approach. You will deploy authentication directly from an OpenAPI (Swagger) specification without writing backend code."}),"\n",(0,r.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(t.p,{children:["WorkOS provides enterprise authentication for applications. MCP servers require authentication to secure MCP Tools and user access. This guide shows how to connect ",(0,r.jsx)(t.a,{href:"https://workos.com/",children:(0,r.jsx)(t.strong,{children:"WorkOS"})})," authentication to MCP servers using OpenAPI specifications and the ",(0,r.jsx)(t.a,{href:"https://docs.mcp.com.ai/components/hapi-server/",children:(0,r.jsx)(t.strong,{children:"HAPI server"})}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(t.p,{children:"Before you begin, ensure you have the following:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"A WorkOS account with an organization."}),"\n",(0,r.jsx)(t.li,{children:"A WorkOS application with Dynamic Client Registration (DCR) enabled."}),"\n",(0,r.jsxs)(t.li,{children:["The ",(0,r.jsx)(t.a,{href:"https://hapi.mcp.com.ai",children:"HAPI server CLI"})," installed."]}),"\n",(0,r.jsxs)(t.li,{children:["An ",(0,r.jsx)(t.a,{href:"https://swagger.io/specification/v3/",children:"OpenAPI (Swagger) specification v3"})," for your API."]}),"\n",(0,r.jsxs)(t.li,{children:["MCP Inspector or any MCP client application supporting ",(0,r.jsx)(t.a,{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization#authorization-flow",children:"authorization flow"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"configure-workos",children:"Configure WorkOS"}),"\n",(0,r.jsx)(t.p,{children:"You must configure WorkOS to enable authentication for your MCP server."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Create an organization and add users in WorkOS."}),"\n",(0,r.jsxs)(t.li,{children:["Create a ",(0,r.jsx)(t.a,{href:"https://workos.com/docs/authkit/example-apps",children:"WorkOS application"})," and ",(0,r.jsx)(t.a,{href:"https://workos.com/docs/authkit/mcp/integrating/enabling-dynamic-client-registration",children:"enable Dynamic Client Registration"})," (DCR)."]}),"\n",(0,r.jsxs)(t.li,{children:["Set up ",(0,r.jsx)(t.a,{href:"https://workos.com/docs/sso/redirect-uris",children:"redirect URIs"})," to the Application (MCP Inspector or your MCP client)."]}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{type:"tip",children:(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"Dynamic Client Registration allows MCP servers to register applications in WorkOS automatically if no client ID is provided."}),"\n"]})}),"\n",(0,r.jsx)(t.h2,{id:"define-api-security-in-openapi-specification",children:"Define API Security in OpenAPI Specification"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml"})}),"\n",(0,r.jsx)(t.p,{children:"Extend your OpenAPI specification to include authentication and CORS settings."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Add a ",(0,r.jsx)(t.a,{href:"https://swagger.io/specification/v3/#oauth-flows-object",children:"security definition for OAuth2"}),", specifying the client ID, authorization URL, and token URL."]}),"\n",(0,r.jsxs)(t.li,{children:["Configure ",(0,r.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CORS",children:"CORS"})," to allow requests from the MCP Client."]}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{type:"tip",children:(0,r.jsxs)(t.p,{children:["WorkOS provides a ",(0,r.jsx)(t.code,{children:".well-known"})," authorization endpoint.\nIf your API does not provide a ",(0,r.jsx)(t.code,{children:".well-known"})," authorization endpoint, HAPI server generates one automatically."]})}),"\n",(0,r.jsx)(t.h2,{id:"start-the-mcp-server",children:"Start the MCP Server"}),"\n",(0,r.jsx)(t.p,{children:"Start the MCP server using your OpenAPI specification."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'hapi serve demo -f "api.yaml" --headless\n# or\nhapi serve https://docs.mcp.com.ai/apis/openapi/demo.yaml -f "api.yaml" --headless\n'})}),"\n",(0,r.jsx)(t.p,{children:"Example files:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(1908).A+"",children:"demo.yaml"})," - the OAS dummy demo"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(5712).A+"",children:"api.yaml"})," - the security extension"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["This command loads your API spec with security and runs the MCP server in ",(0,r.jsx)(t.code,{children:"headless"})," mode for backend integration."]}),"\n",(0,r.jsx)(t.h2,{id:"connect-mcp-server-to-workos",children:"Connect MCP Server to WorkOS"}),"\n",(0,r.jsx)(t.p,{children:"You can authorize Apps (MCP Clients) with WorkOS (Authorization Server) in two ways:"}),"\n",(0,r.jsx)(t.h3,{id:"authenticate-with-client-id",children:"Authenticate with Client ID"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Provide the WorkOS client ID in your configuration."}),"\n",(0,r.jsxs)(t.li,{children:["Users log in through WorkOS (for example, only users from ",(0,r.jsx)(t.code,{children:"@example.com"}),")."]}),"\n",(0,r.jsx)(t.li,{children:"MCP application Client is approved."}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"authenticate-with-dynamic-registration",children:"Authenticate with Dynamic Registration"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Remove the client ID from your configuration."}),"\n",(0,r.jsx)(t.li,{children:"Start the authentication process."}),"\n",(0,r.jsx)(t.li,{children:"WorkOS automatically registers a new application for your MCP."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:'WorkOS creates a new application entry (such as "MCP Inspector") without manual dashboard changes.'}),"\n",(0,r.jsx)(t.h2,{id:"review-authentication-in-workos",children:"Review Authentication in WorkOS"}),"\n",(0,r.jsxs)(t.p,{children:["After authentication, verify the following ",(0,r.jsx)(t.a,{href:"https://dashboard.workos.com",children:"events in the WorkOS dashboard"}),":"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Users are authenticated successfully."}),"\n",(0,r.jsx)(t.li,{children:"Applications is dynamically created, if using DCR."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"WorkOS Dashboard Events",src:n(4065).A+"",width:"1025",height:"892"})}),"\n",(0,r.jsx)(t.h2,{id:"demo-authentication-with-workos",children:"Demo Authentication with WorkOS"}),"\n",(0,r.jsx)(o.A,{style:{width:"80%",height:"auto",aspectRatio:"4/3"},controls:!0,src:"https://youtu.be/S2_Z0rbnOH8"}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"wrapping-up",children:"Wrapping Up"}),"\n",(0,r.jsx)(t.p,{children:"You have integrated WorkOS authentication with MCP servers using OpenAPI specifications and the HAPI server. This approach enables secure, API-driven deployments without backend code."}),"\n",(0,r.jsx)(t.p,{children:"You can now deploy MCP servers with authentication quickly and efficiently."}),"\n",(0,r.jsxs)(t.p,{children:["With the ",(0,r.jsx)(t.strong,{children:"HAPI Server"}),", you can:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Deploy MCP servers straight from ",(0,r.jsx)(t.strong,{children:"OpenAPI specifications (OAS)"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Add authentication via ",(0,r.jsx)(t.strong,{children:"WorkOS"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Do it all ",(0,r.jsx)(t.strong,{children:"without writing a single line of backend code"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"This makes it incredibly fast to go from API spec \u2192 secure MCP server."}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"To request integration with another API or authentication provider, contact the team."}),"\n"]})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.em,{children:"Be-HAPI"})," and go rebels! \u270a\ud83c\udffd"]})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1908:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/files/demo-66cbd525f47421152dc4063aa4f9e5ca.yaml"},4065:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/workos-events-04f44aea105ffc65ae2420bbe99426f7.png"},5712:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/files/api-to-mcp-6fc03be21f2cf121f88235487db2bfe1.yaml"},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var i=n(6540);const r={},a=i.createContext(r);function o(e){const t=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:t},e.children)}},9487:(e,t,n)=>{n.d(t,{A:()=>S});var i=n(6540);const r=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,a=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,o=/\.(m3u8)($|\?)/i,s=/\.(mpd)($|\?)/i,l=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,c=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,h=/vimeo\.com\/(?!progressive_redirect).+/,d=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,u=/open\.spotify\.com\/(\w+)\/(\w+)/i,p=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,m=/tiktok\.com\/(?:@[^/]+\/video\/)?(\d+)(?:\/([\w-]+))?/,f=(e,t)=>{if(Array.isArray(e)){for(const n of e){if("string"==typeof n&&f(n,t))return!0;if(f(n.src,t))return!0}return!1}return t(e)},y={html:e=>f(e,e=>r.test(e)||a.test(e)),hls:e=>f(e,e=>o.test(e)),dash:e=>f(e,e=>s.test(e)),mux:e=>l.test(e),youtube:e=>c.test(e),vimeo:e=>h.test(e)&&!a.test(e)&&!o.test(e),wistia:e=>d.test(e),spotify:e=>u.test(e),twitch:e=>p.test(e),tiktok:e=>m.test(e)};var g=i.forwardRef((e,t)=>{const n=r.test(`${e.src}`)?"audio":"video";return i.createElement(n,{...e,ref:t},e.children)});var v=[{key:"hls",name:"hls.js",canPlay:y.hls,canEnablePIP:()=>!0,player:(0,i.lazy)(()=>Promise.all([n.e(2606),n.e(2262)]).then(n.bind(n,1833)))},{key:"dash",name:"dash.js",canPlay:y.dash,canEnablePIP:()=>!0,player:(0,i.lazy)(()=>n.e(6395).then(n.bind(n,9380)))},{key:"mux",name:"Mux",canPlay:y.mux,canEnablePIP:()=>!0,player:(0,i.lazy)(()=>Promise.all([n.e(2606),n.e(2723)]).then(n.bind(n,1933)))},{key:"youtube",name:"YouTube",canPlay:y.youtube,player:(0,i.lazy)(()=>n.e(8446).then(n.bind(n,126)))},{key:"vimeo",name:"Vimeo",canPlay:y.vimeo,player:(0,i.lazy)(()=>n.e(6173).then(n.bind(n,9301)))},{key:"wistia",name:"Wistia",canPlay:y.wistia,canEnablePIP:()=>!0,player:(0,i.lazy)(()=>n.e(9340).then(n.bind(n,9971)))},{key:"spotify",name:"Spotify",canPlay:y.spotify,canEnablePIP:()=>!1,player:(0,i.lazy)(()=>n.e(2771).then(n.bind(n,9422)))},{key:"twitch",name:"Twitch",canPlay:y.twitch,canEnablePIP:()=>!1,player:(0,i.lazy)(()=>n.e(2042).then(n.bind(n,5946)))},{key:"tiktok",name:"TikTok",canPlay:y.tiktok,canEnablePIP:()=>!1,player:(0,i.lazy)(()=>n.e(8085).then(n.bind(n,3173)))},{key:"html",name:"html",canPlay:y.html,canEnablePIP:()=>!0,player:g}];const w={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},x=i.forwardRef((e,t)=>{const{playing:n,pip:r}=e,a=e.activePlayer,o=(0,i.useRef)(null),s=(0,i.useRef)(!0);(0,i.useEffect)(()=>{var t,i;o.current&&(o.current.paused&&!0===n&&o.current.play(),o.current.paused||!1!==n||o.current.pause(),o.current.playbackRate=null!=(t=e.playbackRate)?t:1,o.current.volume=null!=(i=e.volume)?i:1)}),(0,i.useEffect)(()=>{var e,t,n,i,a;if(o.current&&globalThis.document){if(r&&!document.pictureInPictureElement)try{null==(t=(e=o.current).requestPictureInPicture)||t.call(e)}catch(s){}if(!r&&document.pictureInPictureElement)try{null==(i=(n=o.current).exitPictureInPicture)||i.call(n),null==(a=document.exitPictureInPicture)||a.call(document)}catch(s){}}},[r]);if(!a)return null;const l={};for(const i in e)i.startsWith("on")&&(l[i]=e[i]);return i.createElement(a,{...l,style:e.style,className:e.className,slot:e.slot,ref:(0,i.useCallback)(e=>{o.current=e,"function"==typeof t?t(e):null!==t&&(t.current=e)},[t]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,config:e.config,onLoadStart:t=>{var n,i;s.current=!0,null==(n=e.onReady)||n.call(e),null==(i=e.onLoadStart)||i.call(e,t)},onPlay:t=>{var n,i;s.current&&(s.current=!1,null==(n=e.onStart)||n.call(e,t)),null==(i=e.onPlay)||i.call(e,t)}},e.children)});x.displayName="Player";var P=x;const k=(0,i.lazy)(()=>n.e(6353).then(n.bind(n,1924))),j=[],b=({children:e})=>e;var S=((e,t)=>{const n=i.forwardRef((n,r)=>{const a={...w,...n},{src:o,slot:s,className:l,style:c,width:h,height:d,fallback:u,wrapper:p}=a,[m,f]=(0,i.useState)(!!a.light);(0,i.useEffect)(()=>{a.light?f(!0):f(!1)},[a.light]);const y=e=>{var t;f(!1),null==(t=a.onClickPreview)||t.call(a,e)},g=null==p?b:p,v=!1===u?b:i.Suspense;return i.createElement(g,{slot:s,className:l,style:{width:h,height:d,...c}},i.createElement(v,{fallback:u},m?(e=>{if(!e)return null;const{light:t,playIcon:n,previewTabIndex:r,oEmbedUrl:o,previewAriaLabel:s}=a;return i.createElement(k,{src:e,light:t,playIcon:n,previewTabIndex:r,previewAriaLabel:s,oEmbedUrl:o,onClickPreview:y})})(o):(n=>{var o,c;const h=(n=>{for(const t of[...j,...e])if(n&&t.canPlay(n))return t;return t||null})(n);if(!h)return null;const{style:d,width:u,height:p,wrapper:m}=a,f=null==(o=a.config)?void 0:o[h.key];return i.createElement(P,{...a,ref:r,activePlayer:null!=(c=h.player)?c:h,slot:m?void 0:s,className:m?void 0:l,style:m?{display:"block",width:"100%",height:"100%"}:{display:"block",width:u,height:p,...d},config:f})})(o)))});return n.displayName="ReactPlayer",n.addCustomPlayer=e=>{j.push(e)},n.removeCustomPlayers=()=>{j.length=0},n.canPlay=t=>{if(t)for(const n of[...j,...e])if(n.canPlay(t))return!0;return!1},n.canEnablePIP=t=>{var n;if(t)for(const i of[...j,...e])if(i.canPlay(t)&&(null==(n=i.canEnablePIP)?void 0:n.call(i)))return!0;return!1},n})(v,v[v.length-1])}}]);