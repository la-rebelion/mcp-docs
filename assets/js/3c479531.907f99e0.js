"use strict";(self.webpackChunkmcp_docs=self.webpackChunkmcp_docs||[]).push([[7168],{3335:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>t,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"deployment/cloud/flyio","title":"Deploying HAPI MCP Server on Fly.io","description":"Guide on deploying the HAPI MCP Server on Fly.io using the official pre-built image.","source":"@site/docs/8-deployment/cloud/flyio.mdx","sourceDirName":"8-deployment/cloud","slug":"/deployment/cloud/flyio","permalink":"/deployment/cloud/flyio","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Deploying HAPI MCP Server on Fly.io","sidebar_label":"Fly.io Deployment","description":"Guide on deploying the HAPI MCP Server on Fly.io using the official pre-built image.","position":2},"sidebar":"tutorialSidebar","previous":{"title":"Cloudflare Deployment","permalink":"/deployment/cloud/cloudflare/"},"next":{"title":"Known Issues","permalink":"/troubleshooting/known-issues"}}');var r=i(4848),o=i(8453);const t={title:"Deploying HAPI MCP Server on Fly.io",sidebar_label:"Fly.io Deployment",description:"Guide on deploying the HAPI MCP Server on Fly.io using the official pre-built image.",position:2},s=void 0,a={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Start: Run a HAPI MCP Server Instantly",id:"quick-start-run-a-hapi-mcp-server-instantly",level:2},{value:"Ephemeral Machines:",id:"ephemeral-machines",level:3},{value:"Steps",id:"steps",level:2},{value:"1. Authenticate with Fly.io",id:"1-authenticate-with-flyio",level:3},{value:"2. Create and Configure Your App/MCP Server",id:"2-create-and-configure-your-appmcp-server",level:3},{value:"3. Edit <code>fly.toml</code> for the Pre-Built Image",id:"3-edit-flytoml-for-the-pre-built-image",level:3},{value:"4. Deploy the Pre-Built HAPI MCP Image",id:"4-deploy-the-pre-built-hapi-mcp-image",level:3},{value:"5. (Optional) Set Environment Variables",id:"5-optional-set-environment-variables",level:3},{value:"6. Monitor and Access Your App/MCP Server",id:"6-monitor-and-access-your-appmcp-server",level:3},{value:"Notes",id:"notes",level:2},{value:"<code>fly.toml</code> example for HAPI MCP Server",id:"flytoml-example-for-hapi-mcp-server",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["This guide explains how to deploy the HAPI MCP Server on Fly.io using the official pre-built image (",(0,r.jsx)(n.code,{children:"hapimcp/hapi-cli"}),"). You do not need to build or customize a Dockerfile\u2014just use the official image for a fast, reliable deployment."]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.a,{href:"https://fly.io",children:"Fly.io"})," account"]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.a,{href:"https://fly.io/docs/hands-on/install-flyctl/",children:"flyctl CLI"})," installed on your machine"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"quick-start-run-a-hapi-mcp-server-instantly",children:"Quick Start: Run a HAPI MCP Server Instantly"}),"\n",(0,r.jsxs)(n.p,{children:["For rapid prototyping or testing, you can use ",(0,r.jsx)(n.code,{children:"fly machine run"})," to launch a HAPI MCP Server instance immediately, bypassing the need for manual app creation or configuration files."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'fly machine run hapimcp/hapi-cli:latest --command "hapi serve" \\\n  -e openapi="https://petstore3.swagger.io/api/v3/openapi.json" \\\n  -e url="https://petstore3.swagger.io/api/v3"\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Replace ",(0,r.jsx)(n.code,{children:"latest"})," with a specific version tag if needed."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:'--command "hapi serve"'})," flag tells the container to start the HAPI MCP server."]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"-e"})," to set required environment variables."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Possible Combinations"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Custom Port:\nAdd ",(0,r.jsx)(n.code,{children:"-p 8080"})," to expose a specific port."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Additional Environment Variables:\nAdd more ",(0,r.jsx)(n.code,{children:"-e VAR=value"})," flags as needed."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Custom Command:\nRun a different command if you need to override the default entrypoint."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ephemeral-machines",children:"Ephemeral Machines:"}),"\n",(0,r.jsxs)(n.p,{children:["Add ",(0,r.jsx)(n.code,{children:"--ephemeral"})," to create a machine that is automatically destroyed when stopped."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Recommended: Launch and Deploy for Production"})}),"\n",(0,r.jsx)(n.p,{children:"If you plan to run a production MCP server, follow the full deployment steps below to create a persistent app with proper configuration that can be managed and scaled."}),"\n",(0,r.jsx)(n.h2,{id:"steps",children:"Steps"}),"\n",(0,r.jsx)(n.h3,{id:"1-authenticate-with-flyio",children:"1. Authenticate with Fly.io"}),"\n",(0,r.jsx)(n.p,{children:"Log in to your Fly.io account:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"fly auth login\n"})}),"\n",(0,r.jsx)(n.p,{children:"If you don't have an account, sign up with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"fly auth signup\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-create-and-configure-your-appmcp-server",children:"2. Create and Configure Your App/MCP Server"}),"\n",(0,r.jsx)(n.p,{children:"Create a new Fly.io app and generate a configuration file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'fly launch --no-deploy --image hapimcp/hapi-cli:latest \\\n    -e openapi="https://petstore3.swagger.io/api/v3/openapi.json" \\\n    -e url="https://petstore3.swagger.io/api/v3"\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"When prompted, choose a unique app name and region."}),"\n",(0,r.jsxs)(n.li,{children:["For the HAPI MCP Server instance, you need to provide at least:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["the ",(0,r.jsx)(n.code,{children:"openapi"})," - the URL to your OpenAPI specification (e.g., ",(0,r.jsx)(n.code,{children:"https://petstore3.swagger.io/api/v3/openapi.json"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["and ",(0,r.jsx)(n.code,{children:"url"})," - the 'head' URL of the MCP server (e.g., ",(0,r.jsx)(n.code,{children:"https://petstore3.swagger.io/api/v3"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["This will create a ",(0,r.jsx)(n.code,{children:"fly.toml"})," file in your directory. If you prefer, you can also manually create the ",(0,r.jsx)(n.code,{children:"fly.toml"})," file with the necessary configuration. Example is provided at the end of this guide."]}),"\n",(0,r.jsxs)(n.h3,{id:"3-edit-flytoml-for-the-pre-built-image",children:["3. Edit ",(0,r.jsx)(n.code,{children:"fly.toml"})," for the Pre-Built Image"]}),"\n",(0,r.jsxs)(n.p,{children:["Open the generated ",(0,r.jsx)(n.code,{children:"fly.toml"})," and ensure it does ",(0,r.jsx)(n.strong,{children:"not"})," reference a build section. You will deploy using the pre-built image, so the build section can be removed or ignored."]}),"\n",(0,r.jsx)(n.h3,{id:"4-deploy-the-pre-built-hapi-mcp-image",children:"4. Deploy the Pre-Built HAPI MCP Image"}),"\n",(0,r.jsx)(n.p,{children:"Deploy your app using the official image:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"fly deploy -- serve\n# Or specify the image explicitly:\nfly deploy --image hapimcp/hapi-cli:latest\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Replace ",(0,r.jsx)(n.code,{children:"latest"})," with a specific version tag if needed."]}),"\n",(0,r.jsx)(n.li,{children:"This command will push the pre-built image to Fly.io and start your HAPI MCP Server."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"5-optional-set-environment-variables",children:"5. (Optional) Set Environment Variables"}),"\n",(0,r.jsx)(n.p,{children:"If your HAPI MCP Server requires environment variables, set them with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"fly secrets set VAR_NAME=value\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Or add them to your ",(0,r.jsx)(n.code,{children:"fly.toml"})," under the ",(0,r.jsxs)(n.a,{href:"https://fly.io/docs/reference/configuration/#the-env-variables-section",children:[(0,r.jsx)(n.code,{children:"[env]"})," section"]}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.a,{href:"https://fly.io/docs/apps/secrets/",children:"secrets"})," for sensitive data like API keys."]})}),"\n",(0,r.jsx)(n.h3,{id:"6-monitor-and-access-your-appmcp-server",children:"6. Monitor and Access Your App/MCP Server"}),"\n",(0,r.jsx)(n.p,{children:"After deployment, Fly.io will provide a public URL for your app. You can monitor logs with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"fly logs\n"})}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No Dockerfile or local build is required."}),"\n",(0,r.jsxs)(n.li,{children:["You can redeploy at any time with the same ",(0,r.jsx)(n.code,{children:"fly deploy --image ..."})," command."]}),"\n",(0,r.jsxs)(n.li,{children:["For advanced configuration (volumes, scaling, etc.), refer to the ",(0,r.jsx)(n.a,{href:"https://fly.io/docs/",children:"Fly.io documentation"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"flytoml-example-for-hapi-mcp-server",children:[(0,r.jsx)(n.code,{children:"fly.toml"})," example for HAPI MCP Server"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:"app = 'my-mcp-server'\nprimary_region = 'dfw'\n\n[build]\n  image = 'hapimcp/hapi-cli:latest'\n\n[http_service]\n  internal_port = 8080\n  force_https = true\n  auto_stop_machines = 'stop'\n  auto_start_machines = true\n  min_machines_running = 0\n  processes = ['app']\n\n[env]\n  openapi = 'https://petstore3.swagger.io/api/v3/openapi.json'\n  url = 'https://petstore3.swagger.io/api/v3'\n\n[[vm]]\n  memory = '256mb'\n  cpus = 1\n  memory_mb = 256\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>s});var l=i(6540);const r={},o=l.createContext(r);function t(e){const n=l.useContext(o);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),l.createElement(o.Provider,{value:n},e.children)}}}]);