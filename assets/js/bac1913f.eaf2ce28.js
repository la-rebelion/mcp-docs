"use strict";(self.webpackChunkmcp_docs=self.webpackChunkmcp_docs||[]).push([[9501],{2645:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"components/hapi-server/openapi/known-issues","title":"Known Issues in HAPI Server OpenAPI Integration","description":"Learn about known issues and limitations in HAPI server OpenAPI integration, including MCP context handling, OpenAPI schema generation, and more.","source":"@site/docs/3-components/hapi-server/openapi/known-issues.md","sourceDirName":"3-components/hapi-server/openapi","slug":"/components/hapi-server/openapi/known-issues","permalink":"/components/hapi-server/openapi/known-issues","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"sidebar_label":"Known Issues","title":"Known Issues in HAPI Server OpenAPI Integration","description":"Learn about known issues and limitations in HAPI server OpenAPI integration, including MCP context handling, OpenAPI schema generation, and more.","keywords":["known issues","HAPI server","OpenAPI","MCP"],"author":"La Rebelion Labs","publisher":"MCP Project","dateModified":"2025-08-13"},"sidebar":"tutorialSidebar","previous":{"title":"Validation Layers","permalink":"/components/hapi-server/openapi/validation-layers"},"next":{"title":"Protobuf Integration","permalink":"/components/hapi-server/grpc-idl/"}}');var i=r(4848),s=r(8453);const a={sidebar_position:10,sidebar_label:"Known Issues",title:"Known Issues in HAPI Server OpenAPI Integration",description:"Learn about known issues and limitations in HAPI server OpenAPI integration, including MCP context handling, OpenAPI schema generation, and more.",keywords:["known issues","HAPI server","OpenAPI","MCP"],author:"La Rebelion Labs",publisher:"MCP Project",dateModified:"2025-08-13"},o="Known Issues in HAPI Server OpenAPI Integration",c={},d=[{value:"Cannot create route with parameter name conflict",id:"cannot-create-route-with-parameter-name-conflict",level:2},{value:"Snippet of OpenAPI Specification",id:"snippet-of-openapi-specification",level:3},{value:"Error:",id:"error",level:3},{value:"Cause",id:"cause",level:3},{value:"Solution",id:"solution",level:3},{value:"Please encode all non-ASCII characters",id:"please-encode-all-non-ascii-characters",level:2},{value:"Snippet of OpenAPI Specification",id:"snippet-of-openapi-specification-1",level:3},{value:"Error:",id:"error-1",level:3},{value:"Cause",id:"cause-1",level:3},{value:"Solution",id:"solution-1",level:3}];function l(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"known-issues-in-hapi-server-openapi-integration",children:"Known Issues in HAPI Server OpenAPI Integration"})}),"\n",(0,i.jsx)(n.p,{children:"HAPI server's OpenAPI integration is robust, but like any complex system, it has some known issues and limitations. This document outlines these issues to help you navigate them effectively."}),"\n",(0,i.jsx)(n.h2,{id:"cannot-create-route-with-parameter-name-conflict",children:"Cannot create route with parameter name conflict"}),"\n",(0,i.jsx)(n.p,{children:"When defining routes in HAPI server using OpenAPI specifications, you may encounter an error related to parameter name conflicts. This typically occurs when two routes share the same path but use different parameter names."}),"\n",(0,i.jsx)(n.h3,{id:"snippet-of-openapi-specification",children:"Snippet of OpenAPI Specification"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"openapi: 3.0.0\n# ... rest of the OpenAPI specification removed for brevity\npaths:\n  /background-checks:\n    get:\n      summary: Retrieve Background Checks\n      responses:\n        '200':\n          description: Successful retrieval of background checks\n        '401':\n          description: Unauthorized access\n        '404':\n          description: Background checks not found\n  /background-checks/{resourceId}/records:\n    get:\n      summary: Retrieve Background Check Records\n      parameters:\n        - name: resourceId          # <-- Ensure consistent parameter name here \ud83d\udc47\ud83c\udffd\n          in: path\n          required: true\n          schema:\n            type: string\n      responses:\n        '200':\n          description: Successful retrieval of records\n        '400':\n          description: Bad request due to invalid parameters\n  /background-checks/{id}/pdf:\n    get:\n      summary: Retrieve Background Check PDF\n      parameters:\n        - name: id                  # <-- Ensure consistent parameter name here \ud83d\udc46\ud83c\udffd\n          in: path\n          required: true\n          schema:\n            type: string\n# ... rest of the OpenAPI specification removed for brevity\n"})}),"\n",(0,i.jsx)(n.h3,{id:"error",children:"Error:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'2025-08-13 19:42:35 [ERROR]: Failed to start server: Cannot create route "/background-checks/:resourceId/records" with parameter "resourceId" because a route already exists with a different parameter name ("id") in the same location\n2025-08-13 19:42:35 [ERROR]: Error: Cannot create route "/background-checks/:resourceId/records" with parameter "resourceId" because a route already exists with a different parameter name ("id") in the same location\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cause",children:"Cause"}),"\n",(0,i.jsxs)(n.p,{children:["A path in the OpenAPI specification can be defined with static or dynamic parameters. For scenarios where the path is dynamic, such as ",(0,i.jsx)(n.code,{children:"/background-checks/{id}/records"}),", it is crucial to ensure that the parameter names in the OpenAPI specification for all dynamic paths in common are consistent, otherwise, it can lead to errors initializing the HAPI server or unexpected behavior during API calls."]}),"\n",(0,i.jsx)(n.p,{children:"For example, given two paths:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"/background-checks/{id}/records"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"/background-checks/{resourceId}/records"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If the OpenAPI specification defines these paths with different parameter names, it can lead to conflicts when HAPI server attempts to create routes. This is because HAPI server expects consistent parameter names across similar paths to avoid ambiguity in routing."}),"\n",(0,i.jsx)(n.h3,{id:"solution",children:"Solution"}),"\n",(0,i.jsxs)(n.p,{children:["To resolve this issue, ensure that all dynamic parameters in your OpenAPI specification are consistently named across similar paths. For instance, if you have a path like ",(0,i.jsx)(n.code,{children:"/background-checks/{id}/records"}),", ensure that any other path that refers to the same resource uses the same parameter name (",(0,i.jsx)(n.code,{children:"id"})," in this case)."]}),"\n",(0,i.jsx)(n.h2,{id:"please-encode-all-non-ascii-characters",children:"Please encode all non-ASCII characters"}),"\n",(0,i.jsx)(n.p,{children:"When working with OpenAPI specifications in HAPI server, it is important to ensure that all non-ASCII characters are properly encoded. This is particularly relevant for paths, parameters, and other elements that may contain special characters."}),"\n",(0,i.jsx)(n.h3,{id:"snippet-of-openapi-specification-1",children:"Snippet of OpenAPI Specification"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"openapi: 3.0.0\n# ... rest of the OpenAPI specification removed for\n\npaths:\n  /entities/{entityId}/datasources/mx/buro-de-credito/reports:\n    get:\n      tags:\n        - DS MX Bur\xf3 de Cr\xe9dito Reports                 # <-- Non-ASCII characters '\xe9' and '\xf3' in 'Bur\xf3 de Cr\xe9dito'\n      operationId: GetEntityMxBuroDeCreditoReports\n      summary: Get an entity's Bur\xf3 de Cr\xe9dito reports  # <-- Non-ASCII character '\xe9' and '\xf3' in 'Bur\xf3 de Cr\xe9dito'\n# ... rest of the OpenAPI specification removed for brevity\n"})}),"\n",(0,i.jsx)(n.h3,{id:"error-1",children:"Error:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'2025-08-14 07:31:30 [ERROR]: Failed to start server: Invalid route "/entities/:entityId/datasources/mx/buro-de-credito/reports". Please encode all non-ASCII characters in the path.\n2025-08-14 07:31:30 [ERROR]: TypeError: Invalid route "/entities/:entityId/datasources/mx/buro-de-credito/reports". Please encode all non-ASCII characters in the path.\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cause-1",children:"Cause"}),"\n",(0,i.jsx)(n.p,{children:"The error occurs when the HAPI server encounters a route with non-ASCII characters in its path or it's underlying objects. HAPI server requires that all paths be encoded to ensure proper routing and handling of requests. Non-ASCII characters can lead to issues in URL parsing and routing, which is why they must be encoded."}),"\n",(0,i.jsx)(n.h3,{id:"solution-1",children:"Solution"}),"\n",(0,i.jsxs)(n.p,{children:["To resolve this issue, ensure that all non-ASCII characters in your OpenAPI specification are properly encoded. For example, if you have a path like ",(0,i.jsx)(n.code,{children:"/entities/:entityId/datasources/mx/buro-de-credito/reports"}),", you should encode the non-ASCII characters (like ",(0,i.jsx)(n.code,{children:"\xe9"}),") to their percent-encoded equivalents."]}),"\n",(0,i.jsx)(n.p,{children:"Other options include using Command-Line Tools:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"tr"})," command"]}),": This command can be used to delete characters outside the ASCII range."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"LC_ALL=C tr -dc '\\0-\\177' < input_file > output_file\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"LC_ALL=C: Ensures that character handling is based on the C locale, treating each byte as a distinct character, which is crucial for correct ASCII handling."}),"\n",(0,i.jsx)(n.li,{children:"-d: Deletes characters."}),"\n",(0,i.jsx)(n.li,{children:"-c: Complements the set of characters, meaning it considers characters not in the specified range."}),"\n",(0,i.jsx)(n.li,{children:"'\\0-\\177': Represents the octal range for ASCII characters (0 to 127)."}),"\n",(0,i.jsx)(n.li,{children:"< input_file: Specifies the input file."}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"output_file: Redirects the output to a new file."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"cat"})," and ",(0,i.jsx)(n.code,{children:"grep"})," command"]}),": These commands can be used together to filter out non-ASCII characters."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cat -v input_file.yaml | grep M-CM\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This command will display the contents of ",(0,i.jsx)(n.code,{children:"input_file.yaml"}),', replacing non-printable characters with their caret notation, and then filter lines containing "M-CM" to show only relevant lines with non-ASCII characters.']}),"\n",(0,i.jsx)(n.p,{children:"Using Programming Languages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-Python",children:"    with open('input.txt', 'r', encoding='utf-8') as infile, \\\n         open('output.txt', 'w', encoding='ascii', errors='ignore') as outfile:\n        for line in infile:\n            outfile.write(line)\n"})}),"\n",(0,i.jsx)(n.p,{children:"This code reads the input file with UTF-8 encoding and writes to an output file with ASCII encoding, ignoring characters that cannot be encoded in ASCII.\nUsing Text Editors with Regular Expressions:"}),"\n",(0,i.jsxs)(n.p,{children:["Many advanced text editors like Notepad++, Sublime Text, or VS Code allow you to use regular expressions to find and replace non-ASCII characters. The specific regex might vary slightly between editors, but a common pattern is ",(0,i.jsx)(n.code,{children:"[^\\x00-\\x7F]"})," to match characters outside the ASCII range. You would then replace these matches with an empty string."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(6540);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);