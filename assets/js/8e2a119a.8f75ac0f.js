"use strict";(self.webpackChunkmcp_docs=self.webpackChunkmcp_docs||[]).push([[2745],{6613:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"components/hapi-server/hapi-cli","title":"HAPI CLI","description":"Command-line tool for managing HAPI MCP projects","source":"@site/docs/3-components/hapi-server/hapi-cli.md","sourceDirName":"3-components/hapi-server","slug":"/components/hapi-server/hapi-cli","permalink":"/components/hapi-server/hapi-cli","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"HAPI CLI","description":"Command-line tool for managing HAPI MCP projects","keywords":["HAPI CLI","command-line","API management","MCP","Cloudflare Workers","Fly.io","Docker"],"dateModified":"2026-01-06"},"sidebar":"tutorialSidebar","previous":{"title":"Validation Layers (gRPC)","permalink":"/components/hapi-server/grpc-idl/validation-layers"},"next":{"title":"HAPI Server Routing Engine","permalink":"/components/hapi-server/routing-engine"}}');var i=s(4848),l=s(8453);const d={sidebar_position:2,title:"HAPI CLI",description:"Command-line tool for managing HAPI MCP projects",keywords:["HAPI CLI","command-line","API management","MCP","Cloudflare Workers","Fly.io","Docker"],dateModified:"2026-01-06"},o="HAPI CLI",c={},t=[{value:"Installation",id:"installation",level:2},{value:"Commands Overview",id:"commands-overview",level:2},{value:"Basic Usage (serve)",id:"basic-usage-serve",level:2},{value:"Example",id:"example",level:3},{value:"Common Options (serve)",id:"common-options-serve",level:2},{value:"Environment variables",id:"environment-variables",level:3},{value:"Running with TLS (HTTPS)",id:"running-with-tls-https",level:2},{value:"Headless Mode",id:"headless-mode",level:2},{value:"CORS Configuration",id:"cors-configuration",level:2},{value:"Debugging",id:"debugging",level:2},{value:"Listing available specs",id:"listing-available-specs",level:2},{value:"Deploying to Cloudflare Workers",id:"deploying-to-cloudflare-workers",level:2},{value:"Using Docker",id:"using-docker",level:2},{value:"Help",id:"help",level:2},{value:"Further Reading",id:"further-reading",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"hapi-cli",children:"HAPI CLI"})}),"\n",(0,i.jsx)(n.p,{children:"The HAPI CLI is a command-line tool for managing and serving API projects using the HAPI server for Model Context Protocol (MCP). It enables you to bootstrap, configure, and run API-first services with ease."}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.p,{children:["To install HAPI CLI, you can download the latest release from the ",(0,i.jsx)(n.a,{href:"https://github.com/la-rebelion/hapi-cli/releases",children:"HAPI GitHub repository"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Another option is to use the ",(0,i.jsx)(n.code,{children:"install"})," script accessible via curl:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Linux users"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -fsSL https://get.mcp.com.ai/hapi.sh | bash\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Windows users"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"irm https://get.mcp.com.ai/hapi.ps1 | iex\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Or ",(0,i.jsx)(n.strong,{children:"download the binary directly"})," from the ",(0,i.jsx)(n.a,{href:"https://github.com/la-rebelion/hapimcp/releases/",children:"releases page"})]}),"\n",(0,i.jsxs)(n.p,{children:["Other installation methods, including Docker, ",(0,i.jsx)(n.a,{href:"https://fly.io/dashboard",children:"Fly.io"}),", and ",(0,i.jsx)(n.a,{href:"https://dash.cloudflare.com",children:"Cloudflare"})," Workers, can be found in the ",(0,i.jsx)(n.a,{href:"/deployment",children:"HAPI Server Deployment"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"commands-overview",children:"Commands Overview"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"serve"}),": Start a HAPI MCP server from a local project name or a remote OpenAPI URL."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"list"}),": Show available specs discovered under ",(0,i.jsx)(n.code,{children:"~/.hapi/specs"})," (or your configured ",(0,i.jsx)(n.code,{children:"HAPI_HOME"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"deploy"}),": Publish a HAPI MCP server to Cloudflare Workers (uses Wrangler under the hood)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"login"}),": Authenticate the CLI for deploy targets."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--help"}),": Display the full command and flag reference."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"basic-usage-serve",children:"Basic Usage (serve)"}),"\n",(0,i.jsxs)(n.p,{children:["To start a HAPI server for your API project, use the ",(0,i.jsx)(n.code,{children:"serve"})," command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# local file\nhapi serve <projectname> [options]\n# remote URL\nhapi serve https://petstore3.swagger.io/api/v3/openapi.json [options]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"hapi serve petstore --headless\n"})}),"\n",(0,i.jsx)(n.p,{children:'This will start the Headless API (HAPI) MCP server for the "petstore" project on port 3000 (default).'}),"\n",(0,i.jsx)(n.h2,{id:"common-options-serve",children:"Common Options (serve)"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-p, --port"})}),(0,i.jsx)(n.td,{children:"Port to listen on"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"3000"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--dev"})}),(0,i.jsx)(n.td,{children:"Enable developer/debug mode"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-m, --mcp"})}),(0,i.jsx)(n.td,{children:"Enable MCP mode (Greenfield)"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--headless"})}),(0,i.jsx)(n.td,{children:"Run in headless mode (no REST API, only MCP - Brownfield)"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-u, --url"})}),(0,i.jsx)(n.td,{children:"Base URL for backend API (used in headless mode) - default: Swagger's servers"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3000"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--cert"})}),(0,i.jsx)(n.td,{children:"Path to SSL certificate file (.pem) for HTTPS"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--key"})}),(0,i.jsx)(n.td,{children:"Path to SSL key file (.pem) for HTTPS"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-c, --cors"})}),(0,i.jsx)(n.td,{children:"Comma-separated list of allowed origins for CORS"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"*"})," (all origins)"]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"environment-variables",children:"Environment variables"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HAPI_HOME"})}),(0,i.jsxs)(n.td,{children:["Directory for specs, configs, and logs (matches ",(0,i.jsx)(n.code,{children:"--home"}),")."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HAPI_OPENAPI"})}),(0,i.jsx)(n.td,{children:"Override the OpenAPI source URL/path when using deploy flows."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HAPI_URL"})}),(0,i.jsx)(n.td,{children:"Backend base URL for headless mode."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HAPI_LOG_LEVEL_DEV"})}),(0,i.jsxs)(n.td,{children:["Log level when ",(0,i.jsx)(n.code,{children:"NODE_ENV=development"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HAPI_LOG_LEVEL_PROD"})}),(0,i.jsxs)(n.td,{children:["Log level when ",(0,i.jsx)(n.code,{children:"NODE_ENV=production"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HAPI_DISABLE_FILE_LOGS"})}),(0,i.jsxs)(n.td,{children:["Set to ",(0,i.jsx)(n.code,{children:"true"})," to disable file logging."]})]})]})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Tip: Flags take precedence over environment variables when both are provided."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"running-with-tls-https",children:"Running with TLS (HTTPS)"}),"\n",(0,i.jsx)(n.p,{children:"To enable HTTPS, provide both a certificate and key file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"hapi serve linkedin --port 443 --cert ./certs/cert.pem --key ./certs/key.pem\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Tip:"})," You can generate a self-signed certificate for development using OpenSSL:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'openssl req -x509 -newkey rsa:2048 -nodes -keyout key.pem -out cert.pem -days 365 -subj "/CN=localhost"\n'})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"headless-mode",children:"Headless Mode"}),"\n",(0,i.jsx)(n.p,{children:"Headless mode disables the REST API and only enables MCP server functionality:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"hapi serve myproject --headless\n"})}),"\n",(0,i.jsx)(n.h2,{id:"cors-configuration",children:"CORS Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Allow specific origins for CORS:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'hapi serve myproject --cors "https://example.com,https://another.com"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"debugging",children:"Debugging"}),"\n",(0,i.jsx)(n.p,{children:"Enable debug mode to see detailed logs and registered routes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"hapi serve myproject --dev\n"})}),"\n",(0,i.jsx)(n.h2,{id:"listing-available-specs",children:"Listing available specs"}),"\n",(0,i.jsx)(n.p,{children:"List all OpenAPI specs discovered in your HAPI home:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"hapi list\n"})}),"\n",(0,i.jsx)(n.h2,{id:"deploying-to-cloudflare-workers",children:"Deploying to Cloudflare Workers"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"hapi deploy"})," to publish a worker (Wrangler required):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"hapi deploy --openapi https://petstore3.swagger.io/api/v3/openapi.json \\\n  --url https://petstore3.swagger.io/api/v3 \\\n  --name petstore-hapi\n"})}),"\n",(0,i.jsx)(n.p,{children:"Notable flags:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--openapi <url>"}),": (required) OpenAPI spec URL or file."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--url <url>"}),": Backend base URL for headless mode."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--name <name>"}),": Worker name (RFC 1123 compliant). Autogenerated if omitted."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--project <project>"}),": Optional project grouping name."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--var KEY=VALUE"}),": Repeatable extra vars passed to the worker."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--dry-run"}),": Show what would be deployed without executing."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--keep-config"}),": Keep generated temporary config files for inspection."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"using-docker",children:"Using Docker"}),"\n",(0,i.jsx)(n.p,{children:"You can run the CLI inside a container for local or air-gapped environments:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run --name hapi-petstore -d --rm \\\n  -p 3030:3030 \\\n  -v ~/.hapi:/app/.hapi \\\n  hapimcp/hapi-cli:latest serve petstore --port 3030 --headless\n"})}),"\n",(0,i.jsx)(n.p,{children:"For more deployment patterns (Fly.io, Cloudflare, air-gapped), see the Docker deployment guide in the deployment section."}),"\n",(0,i.jsx)(n.h2,{id:"help",children:"Help"}),"\n",(0,i.jsx)(n.p,{children:"To see all available commands and options:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"hapi --help\n"})}),"\n",(0,i.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"../hapi-server",children:"HAPI Server Documentation"})}),"\n",(0,i.jsxs)(n.li,{children:["HAPI MCP Server ",(0,i.jsx)(n.a,{href:"/deployment",children:"Deployment Guide"})]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://swagger.io/specification/",children:"OpenAPI Specification"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/la-rebelion",children:"Model Context Protocol (MCP)"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>o});var r=s(6540);const i={},l=r.createContext(i);function d(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);